# Backtest Engine

This folder contains the backtesting framework used to simulate strategy performance on historical data.

## Key Files

- **`engine.py`**: The core backtesting logical engine. Handles PnL calculation, transaction costs, leverage checks, and portfolio tracking.
- **`run_backtest.py`**: Command-line interface to running backtests using pre-computed signal files.

## Usage Examples

### Running a Portfolio Backtest
Requires a signal file (Parquet) generated by `strategies.run_strategies`.

```bash
python -m backtest.run_backtest \
    --signals data/signals/rsi_14d_basic.parquet \
    --mode portfolio \
    --initial-capital 100000 \
    --commission-bps 5 \
    --slippage-bps 5 \
    --benchmark data/processed/gpw/wig20.parquet
```

- **Output**: Generates a `.daily.csv` file in `data/backtests/` with the equity curve and daily metrics.
